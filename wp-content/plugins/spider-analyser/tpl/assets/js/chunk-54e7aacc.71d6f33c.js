(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54e7aacc"],{"498a":function(t,e,a){"use strict";var n=a("23e7"),o=a("58a8").trim,i=a("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return o(this)}})},6514:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wbs-content"},[a("div",{staticClass:"wbs-main"},[t.isLoaded?a("table",{staticClass:"wbs-form-table"},[a("tr",[a("th",{staticClass:"row w8em"},[t._v("保留周期 "),a("wbs-tooltip",{attrs:{"data-msg":t.tooltips.log_keep}})],1),a("td",[a("div",{staticClass:"selector-bar"},t._l(t.log_keep,(function(e,n){return a("label",{key:n},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.opt.log_keep,expression:"opt.log_keep"}],attrs:{type:"radio"},domProps:{value:n,checked:t._q(t.opt.log_keep,n)},on:{change:function(e){return t.$set(t.opt,"log_keep",n)}}}),a("span",[t._v(t._s(e))])])})),0)])]),a("tr",[a("th",{staticClass:"row"},[t._v("备份与删除 "),a("wbs-tooltip",{attrs:{"data-msg":t.tooltips.del_backup}})],1),a("td",[a("label",[a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.down_log()}}},[t._v("日志备份")])]),a("label",{staticClass:"ml"},[a("button",{staticClass:"button ",attrs:{type:"button"},on:{click:function(e){return t.del_spider_log()}}},[t._v("日志删除")])])])]),a("tr",[a("th",{staticClass:"row"},[t._v("自定义蜘蛛 "),a("wbs-tooltip",{staticClass:"on-top",attrs:{"data-msg":t.tooltips.custom_spider}})],1),a("td",[a("wbs-custom-spider",{attrs:{items:t.opt.user_define,mode:1,placeholder:"蜘蛛名称"},on:{"set-tags":function(e){t.opt.user_define=e}}})],1)])]):t._e()]),t.$cnf.is_pro?t._e():a("wbs-more-sources"),a("wbs-ctrl-bar",{on:{submit:t.update_data}})],1)},o=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{class:t.mode?"wb-tags-mode-b":"wb-tags-ctrl"},[t.mode?a("div",{staticClass:"wb-tags-input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cur_input,expression:"cur_input"}],staticClass:"wbs-input wbs-input-short",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.cur_input},on:{keyup:t.wbTagInput,input:function(e){e.target.composing||(t.cur_input=e.target.value)}}}),a("a",{staticClass:"ml link",on:{click:t.wbTagPush}},[t._v("添加 +")])]):a("input",{directives:[{name:"model",rawName:"v-model",value:t.cur_input,expression:"cur_input"}],staticClass:"wb-tag-input",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.cur_input},on:{keyup:t.wbTagInput,input:function(e){e.target.composing||(t.cur_input=e.target.value)}}}),t.items.length?a("div",{staticClass:"tag-items"},t._l(t.items,(function(e,n){return a("div",{key:n,staticClass:"tag-item"},[a("span",{staticClass:"vam ib",domProps:{innerHTML:t._s(t.displayFormat(e))}}),a("a",{staticClass:"del",attrs:{"data-del-val":e},on:{click:function(e){return t.delItem(n)}}})])})),0):t._e()])},s=[],r=(a("a9e3"),a("ac1f"),a("5319"),a("c975"),a("498a"),a("a434"),{name:"wbsCustomSpider",props:{items:Array,mode:Number,placeholder:String},data:function(){return{cur_input:"",taglist:[],keycode:null}},template:"#wbs_tpl_custom_spider",created:function(){this.taglist=this.items?this.items:[]},methods:{wbTagInput:function(t){var e=this,a=t.keyCode;188===a&&(e.cur_input=e.cur_input.replace(/(^,)|(,$)/,"")),13===a&&(e.wbTagPush(),event.stopPropagation())},wbTagPush:function(t){var e=this;return""!=e.cur_input&&(e.taglist.indexOf(e.cur_input.trim())>-1?(wbui.toast("已存在"),e.cur_input="",!1):(e.taglist.push(e.cur_input),e.$emit("set-tags",e.taglist),e.cur_input="",!1))},delItem:function(t){var e=this;wbui.confirm("确认删除？",(function(){e.taglist.splice(t,1),e.$emit("set-tags",e.taglist),wbui.toast("已移除")}))},displayFormat:function(t){return t}}}),c=r,u=a("2877"),l=Object(u["a"])(c,i,s,!1,null,null,null),p=l.exports,d={name:"SettingLog",components:{"wbs-custom-spider":p},data:function(){var t=this;return{form_changed:0,isLoaded:0,is_pro:t.$cnf.is_pro,opt:{user_define:[],log_keep:""},log_keep:{1:"最近30天",3:"最近3个月",6:"最近6个月",12:"最近1年",120:"永久保留"},tooltips:{del_backup:"如历史日志体积过大，可以考虑备份与删除日志。",log_keep:"如蜘蛛日志过大导致数据库访问性能下降，建议选择保留周期为最近30天。",custom_spider:"可添加插件未记录的蜘蛛日志，请准确填写蜘蛛名称。"}}},created:function(){this.load_data()},methods:{down_log:function(){var t=this;window.open(ajaxurl+"?action="+t.$cnf.action.act+"&op=down_log","down_log")},del_spider_log:function(){var t=this;wbui.confirm("删除日志操作，将会永久性删除所有蜘蛛历史数据。请谨慎操作！",(function(){t.$api.saveData({action:t.$cnf.action.act,op:"clean_log"}).then((function(t){wbui.toast("删除成功",(function(){location.reload()}))}))}))},load_data:function(){var t=this;t.log_loading=wbui.loading(),t.$api.getData({action:t.$cnf.action.act,tab:"log",op:"get_setting"}).then((function(e){t.opt.user_define=e["data"]["user_define"],t.opt.log_keep=e["data"]["log_keep"],wbui.close(t.log_loading),t.isLoaded=1}))},update_data:function(t){var e=this,a={action:e.$cnf.action.act,op:"update_setting",tab:"log",opt:e.opt};e.$api.saveData(a).then((function(a){wbui.toast("设置保存成功"),e.form_changed=1,t&&t()}))}},watch:{opt:{handler:function(){this.form_changed++},deep:!0}},beforeRouteLeave:function(t,e,a){var n=this;n.form_changed>1?wbui.open({content:"您修改的设置尚未保存，确定离开此页面吗？",btn:["保存并离开","放弃修改"],yes:function(){return a(!1),n.update_data((function(){a()})),!1},no:function(){return a(),!1}}):a()}},f=d,_=Object(u["a"])(f,n,o,!1,null,null,null);e["default"]=_.exports},7156:function(t,e,a){var n=a("861d"),o=a("d2bb");t.exports=function(t,e,a){var i,s;return o&&"function"==typeof(i=e.constructor)&&i!==a&&n(s=i.prototype)&&s!==a.prototype&&o(t,s),t}},a9e3:function(t,e,a){"use strict";var n=a("83ab"),o=a("da84"),i=a("94ca"),s=a("6eeb"),r=a("5135"),c=a("c6b6"),u=a("7156"),l=a("c04e"),p=a("d039"),d=a("7c73"),f=a("241c").f,_=a("06cf").f,g=a("9bf2").f,m=a("58a8").trim,b="Number",h=o[b],w=h.prototype,v=c(d(w))==b,k=function(t){var e,a,n,o,i,s,r,c,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=m(u),e=u.charCodeAt(0),43===e||45===e){if(a=u.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+u}for(i=u.slice(2),s=i.length,r=0;r<s;r++)if(c=i.charCodeAt(r),c<48||c>o)return NaN;return parseInt(i,n)}return+u};if(i(b,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var C,I=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof I&&(v?p((function(){w.valueOf.call(a)})):c(a)!=b)?u(new h(k(e)),a,I):k(e)},N=n?f(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),y=0;N.length>y;y++)r(h,C=N[y])&&!r(I,C)&&g(I,C,_(h,C));I.prototype=w,w.constructor=I,s(o,b,I)}},c8d2:function(t,e,a){var n=a("d039"),o=a("5899"),i="​᠎";t.exports=function(t){return n((function(){return!!o[t]()||i[t]()!=i||o[t].name!==t}))}}}]);